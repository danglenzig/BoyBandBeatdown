[gd_scene load_steps=42 format=3 uid="uid://c57c2dxwox1c4"]

[ext_resource type="Script" path="res://environments/environment.gd" id="1_ot0or"]
[ext_resource type="Texture2D" uid="uid://bv58wdamt1mjy" path="res://environments/assets/env_00.png" id="2_26yqy"]
[ext_resource type="PackedScene" uid="uid://ndpd1xkg8gor" path="res://encounters/npc_encounter.tscn" id="2_27gv0"]
[ext_resource type="Script" path="res://environments/game_camera.gd" id="3_4x8bs"]
[ext_resource type="Script" path="res://environments/z_scaler.gd" id="4_w8wgp"]
[ext_resource type="PackedScene" uid="uid://bml4x556hxm2o" path="res://environments/prop_scenes/walk_sign_prop.tscn" id="7_0uwxj"]
[ext_resource type="PackedScene" uid="uid://yqws4qxfvbnv" path="res://environments/prop_scenes/street_light_prop.tscn" id="8_pn5p6"]
[ext_resource type="PackedScene" uid="uid://cj6egg8wsaeb7" path="res://environments/prop_scenes/environment_00_east_wall_prop.tscn" id="9_o3bbv"]
[ext_resource type="PackedScene" uid="uid://dpujp5fqkb7na" path="res://environments/prop_scenes/environment_00_west_wall_01.tscn" id="10_m8m0l"]
[ext_resource type="PackedScene" uid="uid://br1kyn4b1cmyd" path="res://environments/prop_scenes/environment_00_east_wall_alt_prop.tscn" id="11_58pyb"]
[ext_resource type="PackedScene" uid="uid://daf8pwkm7rt2u" path="res://environments/prop_scenes/environment_00_west_wall_02.tscn" id="11_g6qy6"]
[ext_resource type="Script" path="res://environments/exit_trigger.gd" id="12_jf4gw"]
[ext_resource type="PackedScene" uid="uid://mc8wh7gomyal" path="res://dialogue/dialogue_trigger_area.tscn" id="13_jqwix"]
[ext_resource type="Script" path="res://environments/npc_spawner.gd" id="14_71uiw"]
[ext_resource type="PackedScene" uid="uid://bihf2ljwlb42y" path="res://npcs/gretchen/gretchen_sprite.tscn" id="15_neqai"]
[ext_resource type="PackedScene" uid="uid://33rho0ehl6wp" path="res://npcs/tammy/tammy_sprite.tscn" id="16_imgy8"]
[ext_resource type="PackedScene" uid="uid://draw6d8dxgu4k" path="res://npcs/marcie/marcie_sprite.tscn" id="17_xois5"]
[ext_resource type="PackedScene" uid="uid://bcsqeqj7mqw3j" path="res://npcs/dana/dana_sprite.tscn" id="18_8n321"]
[ext_resource type="PackedScene" uid="uid://4qtf3cqkpnqt" path="res://ui/nav_prompt.tscn" id="18_85fhi"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hau2o"]
size = Vector2(914, 12)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_or0wh"]
size = Vector2(710, 26)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jgump"]
size = Vector2(104, 312)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jo30j"]
size = Vector2(1958, 29)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3y8jf"]
size = Vector2(266, 309)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jwvd3"]
size = Vector2(202, 13)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gbu0v"]
size = Vector2(23, 9)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7c6vy"]
size = Vector2(20, 6)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ly12h"]
size = Vector2(57, 124.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_cb82b"]
size = Vector2(406, 34.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_r3rvh"]
size = Vector2(78.4861, 65.8649)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_quecn"]
size = Vector2(137, 41)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_blprf"]
size = Vector2(222, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_n20kn"]
size = Vector2(258, 44.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_baw0i"]
size = Vector2(20, 84)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_iiqmb"]
size = Vector2(16, 24)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rjlwo"]
size = Vector2(58, 296)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_40nbf"]
size = Vector2(317, 89.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_i3say"]
size = Vector2(193.59, 13)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4mv2r"]
size = Vector2(20, 34)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7m26d"]
size = Vector2(20, 294)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_derk3"]
vertices = PackedVector2Array(1151.4, 739.148, 1150.39, 713, 1248.8, 713, 1296.78, 761.977, 1652.96, 808.961, 1652.03, 1042.05, 246.844, 1049.94, 243.148, 809.93, 719, 806.938, 988.461, 806.969, 874.453, 752.961, 590, 753.961, 590, 730, 822, 730, 822, 704, 944, 704, 944, 734.57, 719, 796.93, 872.578, 795.938, 990.508, 768.031, 998.711, 737, 1555, 762.961, 1555, 766.031)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 7, 8, 9), PackedInt32Array(10, 11, 12, 13), PackedInt32Array(10, 13, 14, 15, 16), PackedInt32Array(9, 8, 17, 18), PackedInt32Array(19, 9, 18, 10, 16), PackedInt32Array(19, 16, 20, 3), PackedInt32Array(21, 22, 19, 3), PackedInt32Array(3, 20, 0)])
outlines = Array[PackedVector2Array]([PackedVector2Array(1663, 799, 1662, 1052, 237, 1060, 233, 800, 709, 797, 709, 787, 863, 786, 864, 763, 580, 764, 580, 720, 812, 720, 812, 694, 954, 694, 954, 725, 999, 727, 1141, 729, 1140, 703, 1253, 703, 1301, 752, 1565, 753, 1565, 776, 1000, 778, 999, 797)])

[node name="Environment_00" type="Node2D"]
position = Vector2(7, -40)
script = ExtResource("1_ot0or")
camera_upper_y = 720
camera_lower_y = 760
camera_left_x = 410
camera_right_x = 1360
encounter_scene = ExtResource("2_27gv0")
environment_background_filename = "env_00.png"
encounter_background_filename = "00.png"

[node name="BackgroundRect" type="TextureRect" parent="."]
offset_right = 40.0
offset_bottom = 40.0
texture = ExtResource("2_26yqy")

[node name="GameCamera" type="Camera2D" parent="."]
position = Vector2(907, 620)
zoom = Vector2(2.5, 2.5)
process_callback = 0
position_smoothing_enabled = true
drag_horizontal_enabled = true
drag_vertical_enabled = true
script = ExtResource("3_4x8bs")

[node name="ZScaler" type="Node2D" parent="." node_paths=PackedStringArray("top_marker", "bottom_marker")]
script = ExtResource("4_w8wgp")
top_marker = NodePath("../TopMarker")
bottom_marker = NodePath("../BottomMarker")
scale_at_top = 0.2
scale_at_bottom = 0.7

[node name="TopMarker" type="Marker2D" parent="."]
position = Vector2(4, 718)

[node name="BottomMarker" type="Marker2D" parent="."]
position = Vector2(-3, 1071)

[node name="DefaultPlayerStart" type="Marker2D" parent="."]
position = Vector2(1457, 888)

[node name="StairsPlayerStart" type="Marker2D" parent="."]
position = Vector2(906, 730)

[node name="WallPlayerStart" type="Marker2D" parent="."]
position = Vector2(1535, 765)

[node name="AllyHolder" type="Node2D" parent="."]

[node name="NpcHolder" type="Node2D" parent="."]

[node name="PropHolder" type="Node2D" parent="."]

[node name="WalkSignProp" parent="PropHolder" instance=ExtResource("7_0uwxj")]
position = Vector2(1395, 847)

[node name="StreetLightProp" parent="PropHolder" instance=ExtResource("8_pn5p6")]
position = Vector2(269, 850)

[node name="Environment_00_EastWallProp" parent="PropHolder" instance=ExtResource("9_o3bbv")]
visible = false
position = Vector2(1166, 792)

[node name="Environment_00_WestWall_01" parent="PropHolder" instance=ExtResource("10_m8m0l")]
position = Vector2(780, 783)

[node name="Environment_00_WestWall_02" parent="PropHolder" instance=ExtResource("11_g6qy6")]
position = Vector2(611, 787)

[node name="Environment_00_EastWallAltProp" parent="PropHolder" instance=ExtResource("11_58pyb")]
position = Vector2(1461, 790)

[node name="EnvironmentBlockers" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(1460, 788)
shape = SubResource("RectangleShape2D_hau2o")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(351, 780)
shape = SubResource("RectangleShape2D_or0wh")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(16, 930)
shape = SubResource("RectangleShape2D_jgump")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(954, 1083.5)
shape = SubResource("RectangleShape2D_jo30j")

[node name="CollisionShape2D5" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(1803, 920.5)
shape = SubResource("RectangleShape2D_3y8jf")

[node name="CollisionShape2D6" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(759, 773.5)
shape = SubResource("RectangleShape2D_jwvd3")

[node name="CollisionShape2D7" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(265.5, 844.5)
shape = SubResource("RectangleShape2D_gbu0v")

[node name="CollisionShape2D8" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(1392, 843)
shape = SubResource("RectangleShape2D_7c6vy")

[node name="CollisionShape2D9" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(1596, 725.75)
shape = SubResource("RectangleShape2D_ly12h")

[node name="CollisionShape2D10" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(1160, 683.25)
shape = SubResource("RectangleShape2D_cb82b")

[node name="CollisionShape2D11" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(1298.54, 696.964)
rotation = 0.785398
shape = SubResource("RectangleShape2D_r3rvh")

[node name="CollisionShape2D12" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(1069.5, 704)
shape = SubResource("RectangleShape2D_quecn")

[node name="CollisionShape2D13" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(849, 672)
shape = SubResource("RectangleShape2D_blprf")

[node name="CollisionShape2D14" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(680, 694.75)
shape = SubResource("RectangleShape2D_n20kn")

[node name="CollisionShape2D15" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(565, 734)
shape = SubResource("RectangleShape2D_baw0i")

[node name="CollisionShape2D16" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(965, 711)
shape = SubResource("RectangleShape2D_iiqmb")

[node name="CollisionShape2D17" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(197, 924)
shape = SubResource("RectangleShape2D_rjlwo")

[node name="CollisionShape2D18" type="CollisionShape2D" parent="EnvironmentBlockers"]
position = Vector2(1461, 704)
shape = SubResource("RectangleShape2D_40nbf")

[node name="ExitTriggerHolder" type="Node2D" parent="."]
position = Vector2(906, 689)
scale = Vector2(0.78, 1)

[node name="NorthExitTrigger" type="Area2D" parent="ExitTriggerHolder"]
script = ExtResource("12_jf4gw")
exit_to_scene_name = "environment_01.tscn"
player_start_name = "EastPlayerStart"

[node name="CollisionShape2D" type="CollisionShape2D" parent="ExitTriggerHolder/NorthExitTrigger"]
position = Vector2(-27.5641, -4.5)
shape = SubResource("RectangleShape2D_i3say")
debug_color = Color(1, 0, 0, 0.419608)

[node name="EastExitTrigger" type="Area2D" parent="ExitTriggerHolder"]
position = Vector2(839.744, 69)
script = ExtResource("12_jf4gw")
exit_to_scene_name = "environment_06.tscn"
player_start_name = "NorthPlayerStart04"

[node name="CollisionShape2D" type="CollisionShape2D" parent="ExitTriggerHolder/EastExitTrigger"]
position = Vector2(0, 7)
shape = SubResource("RectangleShape2D_4mv2r")
debug_color = Color(1, 0, 0, 0.419608)

[node name="DialogueTriggerHolder" type="Node2D" parent="."]

[node name="environment_00_00" parent="DialogueTriggerHolder" instance=ExtResource("13_jqwix")]
position = Vector2(1538, 831)
dialogue_resource_string = "res://dialogue/main_dialogue.dialogue"
start_dialogue_tag = "environment_00_00"
speaker_portrait_resource = "res://dialogue/portraits/player_portrait.png"
one_shot = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="DialogueTriggerHolder/environment_00_00"]
position = Vector2(-208, 100)
shape = SubResource("RectangleShape2D_7m26d")
debug_color = Color(0.663075, 0.512889, 0.0136903, 0.42)

[node name="NpcSpawner" type="Node" parent="."]
script = ExtResource("14_71uiw")
npc_scenes = Array[PackedScene]([ExtResource("15_neqai"), ExtResource("16_imgy8"), ExtResource("18_8n321"), ExtResource("17_xois5")])

[node name="SpawnMarkers" type="Node2D" parent="NpcSpawner"]

[node name="Marker2D" type="Marker2D" parent="NpcSpawner/SpawnMarkers"]
position = Vector2(736, 690)

[node name="Marker2D2" type="Marker2D" parent="NpcSpawner/SpawnMarkers"]
position = Vector2(749, 807)

[node name="Marker2D3" type="Marker2D" parent="NpcSpawner/SpawnMarkers"]
position = Vector2(1101, 793)

[node name="Marker2D4" type="Marker2D" parent="NpcSpawner/SpawnMarkers"]
position = Vector2(953, 692)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_derk3")

[node name="CenterMarker" type="Marker2D" parent="NavigationRegion2D"]
position = Vector2(904, 881)

[node name="BackupAllyStart" type="Marker2D" parent="NavigationRegion2D"]
position = Vector2(934, 801)

[node name="ArrowPrompts" type="Node2D" parent="."]

[node name="NavPrompt" parent="ArrowPrompts" node_paths=PackedStringArray("z_scaler") instance=ExtResource("18_85fhi")]
z_index = 100
position = Vector2(893, 704)
z_scaler = NodePath("../../ZScaler")
scale_modifier = 2.0

[node name="NavPrompt2" parent="ArrowPrompts" node_paths=PackedStringArray("z_scaler") instance=ExtResource("18_85fhi")]
position = Vector2(1513, 683)
rotation = -0.785398
z_scaler = NodePath("../../ZScaler")
scale_modifier = 3.0

[connection signal="body_entered" from="ExitTriggerHolder/NorthExitTrigger" to="ExitTriggerHolder/NorthExitTrigger" method="_on_body_entered"]
[connection signal="body_entered" from="ExitTriggerHolder/EastExitTrigger" to="ExitTriggerHolder/EastExitTrigger" method="_on_body_entered"]
[connection signal="body_entered" from="DialogueTriggerHolder/environment_00_00" to="DialogueTriggerHolder/environment_00_00" method="_on_body_entered"]
