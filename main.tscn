[gd_scene load_steps=13 format=3 uid="uid://pfkhviqoewvu"]

[ext_resource type="Script" path="res://main.gd" id="1_dohkk"]
[ext_resource type="PackedScene" uid="uid://b243as163oakm" path="res://ui/start_menu.tscn" id="2_io0c7"]
[ext_resource type="PackedScene" uid="uid://c57c2dxwox1c4" path="res://environments/environment_00.tscn" id="2_k7bvf"]
[ext_resource type="PackedScene" uid="uid://bnc0he5ytku37" path="res://environments/environment_01.tscn" id="3_df7po"]
[ext_resource type="Script" path="res://ui/hud_panel.gd" id="4_8yxfh"]
[ext_resource type="FontFile" uid="uid://dwswy8wy1p2tm" path="res://fonts/VIPNAGORGIALLA BD.OTF" id="4_bj6ew"]
[ext_resource type="PackedScene" uid="uid://c0etkvben6vtp" path="res://ui/tutorial_sequence/tutorial_sequence_deck.tscn" id="5_l0c5h"]
[ext_resource type="FontFile" uid="uid://c4myb8bqhxmi8" path="res://fonts/VIPNAGORGIALLA BD IT.OTF" id="8_ahwc8"]
[ext_resource type="Script" path="res://ui/level_up_alert_node.gd" id="8_n1g8s"]
[ext_resource type="Texture2D" uid="uid://3gf4gj10fgrw" path="res://ui/assets/flash-light-effect-free-png.png" id="8_rhnxp"]

[sub_resource type="Shader" id="Shader_r7w82"]
code = "//ATTENTION:
//  THIS IS SHADE AUTOGENERATED BY
//  THE ADDON SPRITE-SHADER-MIXER
//  ANY MANUAL CHANGES WILL BE REMOVED WHEN THE ADDON
//  UPDATES THIS SHADER.
//  ANYWAY, YOU CAN SAVE THE CURRENT VERSION AS A RESOURCE FILE.
//SHADERS:Pulse,
shader_type canvas_item;

uniform float opacity:hint_range(0.0, 1.0, 0.01)=1.;

	
uniform bool PULSE_active = true; //activation
uniform vec4 PULSE_shine_color : source_color = vec4(1.0); //Shine color
uniform float PULSE_alpha_limit : hint_range(0.0, 1.0, 0.1) = 0.0; //Alpha color limit to apply the shine, for example, if you won't to apply the shine to semi-transparent pixels
uniform float PULSE_cycle_speed : hint_range(0.0, 100.0, 0.1) = 1.0; //Pulse cycle speed
uniform bool PULSE_full_pulse_cycle = false; //[False = Do the effect and make a pause] [True = Do the effect continuosly]
void pulse(in vec2 uv, in sampler2D tex, in vec2 spriteSize, in vec2 pixelSize, inout vec4 color)
{
	//Check the pixel alpha value
	if (color.a >= PULSE_alpha_limit)
	{
		float cycle = sin(TIME * PULSE_cycle_speed);
		color.rgb = mix(color.rgb, PULSE_shine_color.rgb, (((cycle >= 0.0) || (PULSE_full_pulse_cycle)) ? abs(cycle) : 0.0) * PULSE_shine_color.a);
	}
}

void fragment() {
	vec4 color = texture(TEXTURE, UV);
	vec2 size = vec2(textureSize(TEXTURE, 0));
	vec2 uv = UV;
	vec2 screen_uv = SCREEN_UV;

	if(PULSE_active) pulse(uv, TEXTURE, size, TEXTURE_PIXEL_SIZE, color);


	color.a*=opacity;
	COLOR=color;
}

void vertex() {
	
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0p587"]
shader = SubResource("Shader_r7w82")
shader_parameter/opacity = 1.0
shader_parameter/PULSE_active = true
shader_parameter/PULSE_shine_color = Color(0, 0.647059, 1, 1)
shader_parameter/PULSE_alpha_limit = 0.0
shader_parameter/PULSE_cycle_speed = 22.0
shader_parameter/PULSE_full_pulse_cycle = true

[node name="Main" type="Node"]
script = ExtResource("1_dohkk")
start_menu_scene = ExtResource("2_io0c7")
environment_scenes = Array[PackedScene]([ExtResource("2_k7bvf"), ExtResource("3_df7po")])
tutorial_scene = ExtResource("5_l0c5h")
start_scene_name = "environment_00.tscn"

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = 2

[node name="HudPanel" type="Panel" parent="CanvasLayer"]
self_modulate = Color(1, 1, 1, 0)
top_level = true
z_index = 1
offset_right = 1366.0
offset_bottom = 94.0
script = ExtResource("4_8yxfh")

[node name="MainMenuButton" type="Button" parent="CanvasLayer/HudPanel"]
layout_mode = 1
offset_left = 34.0
offset_top = 32.0
offset_right = 180.0
offset_bottom = 80.0
theme_override_colors/font_hover_color = Color(1, 1, 0, 1)
theme_override_colors/font_pressed_color = Color(0.407843, 1, 1, 1)
theme_override_colors/font_focus_color = Color(1, 1, 0, 1)
theme_override_colors/font_color = Color(0.784314, 0.784314, 0.784314, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 1
theme_override_fonts/font = ExtResource("4_bj6ew")
theme_override_font_sizes/font_size = 16
text = "Main Menu"

[node name="LevelUpPanel" type="Panel" parent="CanvasLayer/HudPanel"]
self_modulate = Color(0, 0, 0, 1)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -372.0
offset_top = -23.0
offset_right = -315.0
offset_bottom = 17.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(12.615, 1.28)

[node name="ColorRect" type="ColorRect" parent="CanvasLayer/HudPanel/LevelUpPanel"]
layout_mode = 0
offset_left = 1.0
offset_top = 7.0
offset_right = 57.0
offset_bottom = 32.0
scale = Vector2(0.515, 1)
color = Color(1, 1, 0, 1)

[node name="LevelUpLabels" type="Node2D" parent="CanvasLayer/HudPanel"]

[node name="CurrentLevelLabel" type="Label" parent="CanvasLayer/HudPanel/LevelUpLabels"]
offset_left = 271.0
offset_top = 78.0
offset_right = 346.0
offset_bottom = 133.0
theme_override_colors/font_color = Color(1, 1, 0, 1)
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/shadow_offset_x = 2
theme_override_constants/shadow_offset_y = 2
theme_override_constants/outline_size = 1
theme_override_fonts/font = ExtResource("4_bj6ew")
theme_override_font_sizes/font_size = 21
text = "Level
N"
horizontal_alignment = 1

[node name="NextLevelLabel" type="Label" parent="CanvasLayer/HudPanel/LevelUpLabels"]
offset_left = 993.0
offset_top = 81.0
offset_right = 1068.0
offset_bottom = 136.0
theme_override_colors/font_color = Color(0.560955, 0.560955, 0.560955, 1)
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/shadow_offset_x = 2
theme_override_constants/shadow_offset_y = 2
theme_override_constants/outline_size = 1
theme_override_fonts/font = ExtResource("4_bj6ew")
theme_override_font_sizes/font_size = 21
text = "Level
M"
horizontal_alignment = 1

[node name="LevelUpAlertNode" type="Node2D" parent="CanvasLayer/HudPanel/LevelUpLabels"]
script = ExtResource("8_n1g8s")

[node name="LevelUpFlashEffect" type="Sprite2D" parent="CanvasLayer/HudPanel/LevelUpLabels/LevelUpAlertNode"]
material = SubResource("ShaderMaterial_0p587")
position = Vector2(659, 115)
scale = Vector2(2.52, 0.582)
texture = ExtResource("8_rhnxp")

[node name="LevelUpLabel" type="Label" parent="CanvasLayer/HudPanel/LevelUpLabels/LevelUpAlertNode"]
offset_left = 489.0
offset_top = 90.0
offset_right = 848.0
offset_bottom = 152.0
theme_override_colors/font_color = Color(1, 1, 0, 1)
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/shadow_offset_x = 3
theme_override_constants/shadow_offset_y = 3
theme_override_constants/outline_size = 2
theme_override_fonts/font = ExtResource("8_ahwc8")
theme_override_font_sizes/font_size = 51
text = "LEVEL UP!!!
"

[connection signal="pressed" from="CanvasLayer/HudPanel/MainMenuButton" to="CanvasLayer/HudPanel" method="_on_main_menu_button_pressed"]
